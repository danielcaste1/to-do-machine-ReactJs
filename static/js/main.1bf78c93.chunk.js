(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t,n){e.exports=n(31)},,,,,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(6),l=n.n(r),c=n(1),i=n(2),s=n(3),d=function(e){return{item:e.initialValue,sincronizedItem:!0,loading:!0,error:!1}},u={ERROR:"ERROR",SUCCESS:"SUCCESS",SAVE:"SAVE",SYNC:"SYNC"},m=function(e,t){return f(e,t.payload)[t.type]||e},f=function(e,t){var n;return n={},Object(i.a)(n,u.ERROR,Object(s.a)({},e,{loading:!1,error:t})),Object(i.a)(n,u.SUCCESS,Object(s.a)({},e,{item:t,sincronizedItem:!0,loading:!1,error:!1})),Object(i.a)(n,u.SAVE,Object(s.a)({},e,{item:t})),Object(i.a)(n,u.SYNC,Object(s.a)({},e,{loading:!0,sincronizedItem:!1})),n};function g(e,t){var n=Object(a.useReducer)(m,d({initialValue:t})),o=Object(c.a)(n,2),r=o[0],l=o[1],i=r.item,s=r.sincronizedItem,f=r.loading,g=r.error,E=function(e){return l({type:u.ERROR,payload:e})};Object(a.useEffect)(function(){try{setTimeout(function(){var n,a=localStorage.getItem(e);a||(n=t,localStorage.setItem(e,JSON.stringify(n)));try{n=JSON.parse(a)}catch(o){n=t}finally{!function(e){l({type:u.SUCCESS,payload:e})}(n)}},500)}catch(g){E(g)}},[s]);return{item:i,saveItem:function(t){try{var n=JSON.stringify(t);localStorage.setItem(e,n),function(e){l({type:u.SAVE,payload:e})}(t)}catch(g){E(g)}},syncItem:function(){l({type:u.SYNC})},loading:f,error:g}}function E(){var e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(""),l=Object(c.a)(r,2),i=l[0],s=l[1],d=g("toDoList",[]),u=d.item,m=d.saveItem,f=d.syncItem,E=d.loading,h=d.error;Object(a.useEffect)(function(){!function(){document.title="To-Do List";var e=u.length-p.length;e&&(document.title="".concat(e," task left"))}()},[u]);var p=u.filter(function(e){return e.completed}),S=[];S=n.length>=1?u.filter(function(e){var t=e.text.toUpperCase(),a=n.toUpperCase();return t.includes(a)}):u;return{state:{completedToDos:p,ToDos:u,loading:E,error:h,filteredToDos:S,searchValue:n,newTodo:i},stateUpdaters:{syncTodos:f,setSearchValue:o,searchChanged:function(e){o(e)},toggleTodo:function(e){var t=u.map(function(t){return u[e]===t&&(t.completed=!t.completed),t});m(t)},setNewTodo:s,addNewTodo:function(){var e=u.slice(),t={text:i,completed:!1};e.unshift(t),m(e),s("")},deleteTodo:function(e){var t=u.slice();t.splice(e,1),m(t)}}}}function h(e){var t=e.loading,n=e.children;return o.a.createElement("header",null,o.a.Children.toArray(n).map(function(e){return o.a.cloneElement(e,{loading:t})}))}n(15);function p(){return o.a.createElement("h1",{className:"app-title"},"To Do Machine")}n(17);function S(e){var t=e.loading,n=e.ToDos,a=e.completedToDos;return o.a.createElement("div",{className:"to-do__counter"},t&&o.a.createElement("span",null,"Loading..."),!t&&o.a.createElement("span",null,"You've done ",a.length," tasks of ",n.length))}n(19);function v(e){var t=e.loading,n=e.searchValue,a=e.searchChanged;return o.a.createElement("div",{className:"search-section"},o.a.createElement("input",{type:"text",placeholder:"Search...",value:n,onChange:function(e){return a(e.target.value)},disabled:t}))}function T(){return o.a.createElement("p",{className:"loading"},o.a.createElement("i",{className:"fa-solid fa-circle-notch"}))}n(21);function b(e){var t=e.children||e.render;return o.a.createElement("div",{className:"to-do-list"},o.a.createElement("h3",{className:"to-do-list__title"},"Your tasks"),!!e.error&&e.onError(),(!!e.loading||!e.sincronize)&&e.onLoad(),!e.loading&&!e.filteredToDos.length&&!e.searchValue.length&&e.onEmptyToDos(),!e.loading&&!e.filteredToDos.length&&!!e.searchValue.length&&e.onEmptySearchResults(),!e.loading&&e.sincronize&&e.filteredToDos.map(t))}n(23);function y(e){var t=e.text,n=e.completed,a=e.data_key,r=e.toggleTodo,l=e.deleteTodo;return o.a.createElement("div",{className:"".concat(n?"completed":""," to-do-item")},o.a.createElement("span",{className:"item--complete-button",onClick:function(){r(a)}},o.a.createElement("i",{className:"fa-solid fa-check"})),o.a.createElement("p",null,t),o.a.createElement("span",{className:"item--delete-button",onClick:function(){l(a)}},o.a.createElement("i",{className:"fa-solid fa-trash"})))}n(25);function N(e){var t=e.openModal,n=e.toggleModal,a=e.setShowingModal;return o.a.createElement("div",{className:"add-task"},o.a.createElement("button",{type:"button",className:"add-task__button ".concat(t?"opened":""),onClick:function(){n(),a("addToDo")}},"+"))}var w=n(4),O=n.n(w);n(27);function C(e){var t=e.openModal,n=e.children;return t?O.a.createPortal(n,document.querySelector("#modal")):null}function M(e){var t=e.children;return o.a.createElement("div",{className:"modal__background"},o.a.createElement("div",{className:"modal__card"},t))}function D(){return o.a.createElement("p",{className:"error"},"Oops! Something wrong just ocurred ")}function j(){return o.a.createElement("p",null,"Add your first task with the + icon")}function k(e){var t=e.searchValue;return o.a.createElement("p",{className:"xdds"}," No results found for ",t," ")}function _(e){var t=e.newTodo,n=e.setNewTodo,r=e.addNewTodo,l=e.toggleModal;return o.a.createElement(a.Fragment,null,o.a.createElement("p",{className:"card__title"},"Set a new task!"),o.a.createElement("input",{value:t,type:"text",className:"card__input",onChange:function(e){n(e.target.value)}}),o.a.createElement("div",{className:"card__footer"},o.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:l},"Cancel"),o.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){r(t),l()}},"Add")))}function R(e){return function(t){var n=Object(a.useState)(!1),r=Object(c.a)(n,2),l=r[0],i=r[1];window.addEventListener("storage",function(e){"toDoList"===e.key&&(i(e),t.toggleModal(),t.setShowingModal("changeAlert"))});return o.a.createElement(e,Object.assign({},t,{show:l,toggleShow:function(){i(!1),t.sincronizeToDos(),t.toggleModal()}}))}}var V=R(function(e){return e.show,e.toggleShow,null});var I=R(function(e){var t=e.toggleShow;return o.a.createElement(a.Fragment,null,o.a.createElement("p",{className:"card__info"},"Hmmm... It looks like your To Do List changed recently, would you like to refresh your list to get the last changes?"),o.a.createElement("div",{className:"card__footer"},o.a.createElement("button",{className:"btn btn-primary",onClick:function(){t()}},"Refresh")))});var x=function(){var e=E(),t=e.state,n=e.stateUpdaters,r=t.completedToDos,l=t.ToDos,i=t.loading,s=t.error,d=t.filteredToDos,u=t.searchValue,m=t.newTodo,f=n.syncTodos,g=n.searchChanged,w=n.toggleTodo,O=n.setNewTodo,R=n.addNewTodo,x=n.deleteTodo,z=function(){var e=Object(a.useState)(!1),t=Object(c.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(null),l=Object(c.a)(r,2),i=l[0],s=l[1];return{openModal:n,toggleModal:function(){o(!n)},showingModal:i,setShowingModal:s}}(),A=z.openModal,L=z.toggleModal,U=z.showingModal,Y=z.setShowingModal;return o.a.createElement(o.a.Fragment,null,o.a.createElement(p,null),o.a.createElement(h,{loading:i},o.a.createElement(S,{completedToDos:r,ToDos:l}),o.a.createElement(v,{searchValue:u,searchChanged:g})),o.a.createElement(b,{error:s,onError:function(){return o.a.createElement(D,null)},loading:i,sincronize:f,onLoad:function(){return o.a.createElement(T,null)},filteredToDos:d,onEmptyToDos:function(){return o.a.createElement(j,null)},searchValue:u,onEmptySearchResults:function(){return o.a.createElement(k,{searchValue:u})}},function(e){return o.a.createElement(y,{key:d.indexOf(e),text:e.text,completed:e.completed,data_key:d.indexOf(e),toggleTodo:w,deleteTodo:x})}),o.a.createElement(N,{openModal:A,toggleModal:L,setShowingModal:Y}),o.a.createElement(C,{openModal:A},o.a.createElement(M,null,"addToDo"===U&&o.a.createElement(_,{newTodo:m,setNewTodo:O,addNewTodo:R,toggleModal:L}),"changeAlert"===U&&o.a.createElement(I,{toggleModal:L,sincronizeToDos:f,setShowingModal:Y}))),o.a.createElement(V,{toggleModal:L,sincronizeToDos:f,setShowingModal:Y}))};n(29);l.a.createRoot(document.getElementById("root")).render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(x,null)))}],[[7,2,1]]]);
//# sourceMappingURL=main.1bf78c93.chunk.js.map